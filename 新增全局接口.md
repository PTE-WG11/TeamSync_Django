## 5.6 获取全局任务看板数据（跨项目）

**GET** `/tasks/kanban/`

> 权限：所有团队成员
> 数据范围：管理员返回所有任务，成员返回自己的任务

#### 查询参数

| 参数       | 类型    | 必填 | 说明                          |
| ---------- | ------- | ---- | ----------------------------- |
| project_id | integer | 否   | 项目过滤，不传则显示所有项目  |
| assignee   | string  | 否   | me(我的), all(全部)，默认 all |

#### 响应示例

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "columns": [
      {
        "id": "planning",
        "title": "规划中",
        "color": "#94A3B8",
        "tasks": [
          {
            "id": 5,
            "title": "技术选型",
            "priority": "high",
            "assignee": {"id": 1, "username": "zhangsan"},
            "project": {"id": 1, "title": "电商平台重构"},
            "end_date": "2026-02-20",
            "normal_flag": "normal"
          }
        ]
      },
      {
        "id": "pending",
        "title": "待处理",
        "color": "#F59E0B",
        "tasks": [...]
      },
      {
        "id": "in_progress",
        "title": "进行中",
        "color": "#0D9488",
        "tasks": [...]
      },
      {
        "id": "completed",
        "title": "已完成",
        "color": "#10B981",
        "tasks": [...]
      }
    ]
  }
}
```

---

## 5.7 获取全局任务列表数据（跨项目）

**GET** `/tasks/list/`

> 权限：所有团队成员
> 数据范围：管理员返回所有任务，成员返回自己的任务

#### 查询参数

| 参数       | 类型    | 必填 | 说明                                     |
| ---------- | ------- | ---- | ---------------------------------------- |
| project_id | integer | 否   | 项目过滤                                 |
| status     | string  | 否   | 状态过滤，多个用逗号分隔                 |
| priority   | string  | 否   | 优先级过滤                               |
| assignee   | string  | 否   | me(我的), all(全部)                      |
| search     | string  | 否   | 标题搜索                                 |
| sort_by    | string  | 否   | 排序字段: created_at, end_date, priority |
| sort_order | string  | 否   | 排序方向: asc, desc                      |
| page       | integer | 否   | 页码，默认 1                             |
| page_size  | integer | 否   | 每页数量，默认 20                        |

#### 响应示例

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "items": [
      {
        "id": 1,
        "title": "API设计",
        "status": "in_progress",
        "priority": "high",
        "level": 1,
        "assignee": {"id": 1, "username": "zhangsan"},
        "project": {"id": 1, "title": "电商平台重构"},
        "start_date": "2026-02-01",
        "end_date": "2026-02-10",
        "normal_flag": "normal",
        "created_at": "2026-02-01T08:00:00Z"
      }
    ],
    "pagination": {
      "page": 1,
      "page_size": 20,
      "total": 50,
      "total_pages": 3
    }
  }
}
```

---

## 5.8 获取全局甘特图数据（跨项目）

**GET** `/tasks/gantt/`

> 权限：所有团队成员
> 数据范围：管理员返回所有主任务，成员返回自己的主任务+子任务树

#### 查询参数

| 参数       | 类型    | 必填 | 说明                             |
| ---------- | ------- | ---- | -------------------------------- |
| project_id | integer | 否   | 项目过滤                         |
| start_date | date    | 否   | 开始日期范围                     |
| end_date   | date    | 否   | 结束日期范围                     |
| view_mode  | string  | 否   | 视图模式: day(默认), week, month |

#### 响应示例

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "view_mode": "day",
    "date_range": {
      "start": "2026-02-01",
      "end": "2026-02-28"
    },
    "tasks": [
      {
        "id": 1,
        "title": "需求分析",
        "start": "2026-02-01",
        "end": "2026-02-05",
        "progress": 100,
        "status": "completed",
        "assignee": {"id": 1, "username": "zhangsan"},
        "project": {"id": 1, "title": "电商平台重构"},
        "level": 1,
        "children": []
      }
    ],
    "projects": [
      {"id": 1, "title": "电商平台重构", "color": "#0D9488"},
      {"id": 2, "title": "官网改版", "color": "#0891B2"}
    ]
  }
}
```

---

## 5.9 获取全局日历数据（跨项目）

**GET** `/tasks/calendar/`

> 权限：所有团队成员
> 数据范围：管理员返回所有任务，成员返回自己的任务

#### 查询参数

| 参数       | 类型    | 必填 | 说明                |
| ---------- | ------- | ---- | ------------------- |
| year       | integer | 是   | 年份                |
| month      | integer | 是   | 月份 (1-12)         |
| project_id | integer | 否   | 项目过滤            |
| assignee   | string  | 否   | me(我的), all(全部) |

#### 响应示例

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "year": 2026,
    "month": 2,
    "days": [
      {
        "date": "2026-02-01",
        "tasks": [
          {
            "id": 1,
            "title": "需求分析",
            "status": "completed",
            "priority": "high",
            "assignee": {"id": 1, "username": "zhangsan"},
            "project": {"id": 1, "title": "电商平台重构"}
          }
        ]
      }
    ]
  }
}
```

---

*文档版本: v1.0 | 最后更新: 2026-02-11*

### API 端点汇总补充

### 全局任务视图

| 方法 | 端点               | 说明           |
| ---- | ------------------ | -------------- |
| GET  | `/tasks/kanban/`   | 全局看板数据   |
| GET  | `/tasks/list/`     | 全局列表数据   |
| GET  | `/tasks/gantt/`    | 全局甘特图数据 |
| GET  | `/tasks/calendar/` | 全局日历数据   |